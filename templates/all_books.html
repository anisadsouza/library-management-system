{% extends "base.html" %}
{% block title %}{{ category }} • LMS{% endblock %}

{% block content %}
<section class="page">
  <div class="page-head row">
    <div>
      <h1>{{ category }}</h1>
      <p class="muted">Available Books</p>
    </div>
    <div class="row-gap">
      <a class="btn ghost" href="{% url 'books' %}">← Back</a>
      {% if user.is_authenticated %}
        <a class="btn" href="{% url 'my_cart' %}">My Books</a>
      {% else %}
        <a class="btn" href="{% url 'login' %}">Login to Add</a>
      {% endif %}
    </div>
  </div>

  {% if books %}
    <div class="grid">
      {% for b in books %}
        <div class="card book-card">
          <div class="card-title">{{ b.title }}</div>
          <div class="pill">{{ b.book_type }}</div>
          <div class="price">₹ {{ b.price }}</div>

          {% if user.is_authenticated %}
            <a class="btn small" href="{% url 'add_to_cart' b.id %}">Add to My Books</a>
          {% else %}
            <div class="muted small-text">Login to save this book</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty">
      <h2>No books available</h2>
      <p class="muted">You haven’t inserted sample books yet for “{{ category }}”.</p>
    </div>
  {% endif %}
</section>
{% endblock %}